!function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return r(i||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){(function(i){var n="undefined"!=typeof window?window.L:void 0!==i?i.L:null,r=t("fetch-jsonp"),o=t("bbox-intersect");var a=["Aerial","AerialWithLabels","Road","ordnanceSurvey","collinsBart"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"ordnanceSurvey",culture:"en-US",minZoom:1},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/gmaclennan/leaflet-bing-layer#parameters");t.minZoom=Math.max(1,t.minZoom);var e=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet});this._imageryProviders=[],this._attributions=[],this._fetch=r(e,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(void 0),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){e(t)}),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",r=i;r>0;r--){var o=0,a=1<<r-1;0!=(t&a)&&o++,0!=(e&a)&&(o+=2),n+=o.toString()}return n}(t.x,t.y,t.z);return n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture})},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return r(i,{jsonpCallback:"jsonp"}).then(function(t){return t.json()}).catch(void 0)},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders,this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t=this._map;if(t&&t.attributionControl){var e=t.getZoom(),i=function(t){var e=t.split(",");return[e[1],e[0],e[3],e[2]]}(t.getBounds().toBBoxString());this._fetch.then(function(){var n=this._getAttributions(i,e),r=this._attributions;n.forEach(function(e){r.indexOf(e)>-1||t.attributionControl.addAttribution(e)}),r.filter(function(e){n.indexOf(e)>-1||t.attributionControl.removeAttribution(e)}),this._attributions=n}.bind(this))}},_getAttributions:function(t,e){return this._imageryProviders.reduce(function(i,n){for(var r=0;r<n.coverageAreas.length;r++)if(o(t,n.coverageAreas[r].bbox)&&e>=n.coverageAreas[r].zoomMin&&e<=n.coverageAreas[r].zoomMax)return i.push(n.attribution),i;return i},[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},e.exports=n.TileLayer.Bing}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bbox-intersect":2,"fetch-jsonp":3}],2:[function(t,e,i){e.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},{}],3:[function(t,e,i){!function(t,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if(void 0!==i&&void 0!==e)n(i,e);else{var r={exports:{}};n(r.exports,r),t.fetchJsonp=r.exports}}(this,function(t,e){"use strict";var i=5e3,n="callback";function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=void 0===arguments[1]?{}:arguments[1],a=null!=e.timeout?e.timeout:i,s=null!=e.jsonpCallback?e.jsonpCallback:n,u=void 0;return new Promise(function(i,n){var l=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random());window[l]=function(t){i({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(s+"_"+l),r(l)},t+=-1===t.indexOf("?")?"?":"&";var c=document.createElement("script");c.setAttribute("src",t+s+"="+l),c.id=s+"_"+l,document.getElementsByTagName("head")[0].appendChild(c),u=setTimeout(function(){n(new Error("JSONP request to "+t+" timed out")),r(l),o(s+"_"+l)},a)})}})},{}]},{},[1]);