!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pouchdbFind=e()}}(function(){return function e(t,n,r){function o(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}var o=e(4),i=e(5),u=i.Promise;t.exports=function(e){var t=e.db,n=e.viewName,s=e.map,a=e.reduce,c=e.temporary,f=e.pluginName,l=r(s)+r(a)+"undefined";if(!c&&t._cachedViews){var d=t._cachedViews[l];if(d)return u.resolve(d)}return t.info().then(function(e){var r=e.db_name+"-mrview-"+(c?"temp":i.MD5(l));return o(t,"_local/"+f,function(e){e.views=e.views||{};var t=n;-1===t.indexOf("/")&&(t=n+"/"+n);var o=e.views[t]=e.views[t]||{};if(!o[r])return o[r]=!0,e}).then(function(){return t.registerDependentDatabase(r).then(function(e){var n=e.db;n.auto_compaction=!0;var o={name:r,db:n,sourceDB:t,adapter:t.adapter,mapFun:s,reduceFun:a};return o.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return o.seq=e?e.seq:0,c||(t._cachedViews=t._cachedViews||{},t._cachedViews[l]=o,o.db.on("destroyed",function(){delete t._cachedViews[l]})),o})})})})}},{4:4,5:5}],2:[function(e,t,n){(function(n){"use strict";function r(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,r)}catch(e){}}function o(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,o)}catch(e){}}function i(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function u(e,t){var n=h(e.key,t.key);return 0!==n?n:h(e.value,t.value)}function s(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function a(e,t,n){try{return{output:t.apply(null,n)}}catch(t){return function(e,t){try{e.emit("error",t)}catch(e){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(t)}}(e,t),{error:t}}}function c(e,t){var n=e.descending?"endkey":"startkey",o=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[o]&&h(e[n],e[o])>0)throw new r("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new r("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new r("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new r('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new r('Invalid value for positive integer: "'+e.group_level+'"')}}function f(e){return function(t){if(404===t.status)return e;throw t}}var l=e(26),d=e(3),h=l.collate,p=l.toIndexableString,v=l.normalizeKey,y=e(1);"undefined"!=typeof console&&"function"==typeof console.log&&Function.prototype.bind.call(console.log,console);var g=e(5),m=g.Promise,b={},w=new d,k=50;g.inherits(r,Error),g.inherits(o,Error),t.exports=function(e){function t(e,t,n){var r,o="_local/doc_"+e,i={_id:o,keys:[]},u=n[e],s=u.indexableKeysToKeyValues,a=u.changes;return(1===(r=a).length&&/^1-/.test(r[0].rev)?m.resolve(i):t.db.get(o).catch(f(i))).then(function(e){return(n=e,n.keys.length?t.db.allDocs({keys:n.keys,include_docs:!0}):m.resolve({rows:[]})).then(function(t){return function(e,t){for(var n=[],r={},o=0,i=t.rows.length;i>o;o++){var u=t.rows[o].doc;if(u&&(n.push(u),r[u._id]=!0,u._deleted=!s[u._id],!u._deleted)){var a=s[u._id];"value"in a&&(u.value=a.value)}}var c=Object.keys(s);return c.forEach(function(e){if(!r[e]){var t={_id:e},o=s[e];"value"in o&&(t.value=o.value),n.push(t)}}),e.keys=g.uniq(c.concat(e.keys)),n.push(e),n}(e,t)});var n})}function r(e){var t="string"==typeof e?e:e.name,n=b[t];return n||(n=b[t]=new d),n}function _(e){return g.sequentialize(r(e),function(){return function(e){function n(n,r){return function(){return i=n,u=r,s="_local/lastSeq",(o=e).db.get(s).catch(f({_id:s,seq:0})).then(function(e){var n=Object.keys(i);return m.all(n.map(function(e){return t(e,o,i)})).then(function(t){var n=g.flatten(t);return e.seq=u,n.push(e),o.db.bulkDocs({docs:n})})});var o,i,u,s}}var r,o,i=j(e.mapFun,function(e,t){var n={id:o._id,key:v(e)};null!=t&&(n.value=v(t)),r.push(n)}),s=e.seq||0,c=new d;return new m(function(t,f){function l(){c.finish().then(function(){e.seq=s,t()})}!function t(){e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:k}).on("complete",function(f){var d=f.results;if(!d.length)return l();for(var v={},y=0,g=d.length;g>y;y++){var m=d[y];if("_"!==m.doc._id[0]){r=[],(o=m.doc)._deleted||a(e.sourceDB,i,[o]),r.sort(u);for(var b,w={},_=0,x=r.length;x>_;_++){var $=r[_],j=[$.key,$.id];0===h($.key,b)&&j.push(_);var O=p(j);w[O]=$,b=$.key}v[m.doc._id]={indexableKeysToKeyValues:w,changes:m.changes}}s=m.seq}return c.add(n(v,s)),d.length<k?l():t()}).on("error",function(e){f(e)})}()})}(e)})()}function x(e,t){return g.sequentialize(r(e),function(){return function(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(n>t||t>n))return e.doc.value}var r=l.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=i?function(e,t,n){0===n.group_level&&delete n.group_level;var r,o,i,u=n.group||n.group_level,s=O(e.reduceFun),c=[],f=n.group_level;t.forEach(function(e){var t=c[c.length-1],n=u?e.key:null;return u&&Array.isArray(n)&&"number"==typeof f&&(n=n.length>f?n.slice(0,f):n),t&&0===h(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void c.push({key:[[n,e.id]],value:[e.value]})});for(var l=0,d=c.length;d>l;l++){var p=c[l],v=a(e.sourceDB,s,[p.key,p.value,!1]);if(v.error&&/BuiltInError/.test(v.error.constructor))throw v.error;p.value=v.error?null:v.output,p.key=p.key[0][0]}return{rows:(r=c,o=n.limit,i=n.skip,i=i||0,"number"==typeof o?r.slice(i,o+i):i>0?r.slice(i):r)}}(e,n,t):{total_rows:o,offset:u,rows:n},t.include_docs){var c=g.uniq(n.map(s));return e.sourceDB.allDocs({keys:c,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),n.forEach(function(e){var n=s(e),r=t["$"+n];r&&(e.doc=r)}),r})}return r}var o,i=e.reduceFun&&!1!==t.reduce,u=t.skip||0;if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){var c=t.keys,f=c.map(function(e){var t={startkey:p([e]),endkey:p([e,{}])};return n(t)});return m.all(f).then(function(e){return e.reduce(function(e,t){return e.concat(t)})}).then(r)}var d={descending:t.descending};if(void 0!==t.startkey&&(d.startkey=p(t.descending?[t.startkey,{}]:[t.startkey])),void 0!==t.endkey){var v=!1!==t.inclusive_end;t.descending&&(v=!v),d.endkey=p(v?[t.endkey,{}]:[t.endkey])}if(void 0!==t.key){var y=p([t.key]),b=p([t.key,{}]);d.descending?(d.endkey=y,d.startkey=b):(d.startkey=y,d.endkey=b)}return i||("number"==typeof t.limit&&(d.limit=t.limit),d.skip=u),n(d).then(r)}(e,t)})()}var $=e.name,j=e.mapper,O=e.reducer,A=e.ddocValidator;return{query:function(e,t,r){var u=this;"function"==typeof t&&(r=t,t={}),t=g.extend(!0,{},t),"function"==typeof e&&(e={map:e});var s=m.resolve().then(function(){return function(e,t,r){if("string"!=typeof t){c(r,t);var u={db:e,viewName:"temp_view/temp_view",map:t.map,reduce:t.reduce,temporary:!0,pluginName:$};return w.add(function(){return y(u).then(function(e){return g.fin(_(e).then(function(){return x(e,r)}),function(){return e.db.destroy()})})}),w.finish()}var s=t,a=i(s),f=a[0],l=a[1];return e.get("_design/"+f).then(function(t){var i=t.views&&t.views[l];if(!i)throw new o("ddoc "+t._id+" has no view named "+l);A(t,l),c(r,i);var u={db:e,viewName:s,map:i.map,reduce:i.reduce,pluginName:$};return y(u).then(function(e){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&n.nextTick(function(){_(e)}),x(e,r)):_(e).then(function(){return x(e,r)})})})}(u,e,t)});return g.promisedCallback(s,r),s},viewCleanup:g.callbackify(function(){var e;return(e=this).get("_local/"+$).then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=i(e),r="_design/"+t[0],o=t[1];n[r]=n[r]||{},n[r][o]=!0});var o={keys:Object.keys(n),include_docs:!0};return e.allDocs(o).then(function(o){var i={};o.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var o=r+"/"+n;t.views[o]||(o=n);var u=Object.keys(t.views[o]),s=e.doc&&e.doc.views&&e.doc.views[n];u.forEach(function(e){i[e]=i[e]||s})})});var u=Object.keys(i).filter(function(e){return!i[e]}).map(function(t){return g.sequentialize(r(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return m.all(u).then(function(){return{ok:!0}})})},f({ok:!0}))})}}}).call(this,e(34))},{1:1,26:26,3:3,34:34,5:5}],3:[function(e,t,n){"use strict";function r(){this.promise=new o(function(e){e()})}var o=e(5).Promise;r.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},r.prototype.finish=function(){return this.promise},t.exports=r},{5:5}],4:[function(e,t,n){"use strict";var r=e(31).upsert;t.exports=function(e,t,n){return r.apply(e,[t,n])}},{31:31}],5:[function(e,t,n){(function(t){"use strict";n.Promise=e(29),n.inherits=e(23),n.extend=e(28);var r=e(18);n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return r(function(t){var r=t.pop(),o=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(o,r),o})},n.fin=function(e,t){return e.then(function(e){var n=t();return"function"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if("function"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}},n.flatten=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t},n.uniq=function(e){for(var t={},n=0,r=e.length;r>n;n++)t["$"+e[n]]=!0;var o=Object.keys(t),i=new Array(o.length);for(n=0,r=o.length;r>n;n++)i[n]=o[n].substring(1);return i};var o=e(19),i=e(35);n.MD5=function(e){return t.browser?i.hash(e):o.createHash("md5").update(e).digest("hex")}}).call(this,e(34))},{18:18,19:19,23:23,28:28,29:29,34:34,35:35}],6:[function(e,t,n){"use strict";var r=e(16);n.createIndex=function(e,t,n){t=r(t),e.request({method:"POST",url:"_index",body:t},n)},n.find=function(e,t,n){e.request({method:"POST",url:"_find",body:t},n)},n.getIndexes=function(e,t){e.request({method:"GET",url:"_index"},t)},n.deleteIndex=function(e,t,n){var r=t.ddoc,o=t.type||"json",i=t.name;if(!r)return n(new Error("you must provide an index's ddoc"));if(!i)return n(new Error("you must provide an index's name"));var u="_index/"+[r,o,i].map(encodeURIComponent).join("/");e.request({method:"DELETE",url:u},n)}},{16:16}],7:[function(e,t,n){"use strict";function r(e,t){var n,r,o,i,s,a,c,f,l,d=function(e){for(var t=0,n=e.length;n>t;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),h=1===e.length;return d?h?(f=e[0],l=t,function(e){l(e[f])}):(a=e,c=t,function(e){for(var t=[],n=0,r=a.length;r>n;n++)t.push(e[a[n]]);c(t)}):h?(o=e[0],i=t,s=u(o),function(e){for(var t=e,n=0,r=s.length;r>n;n++)if(!(t=t[s[n]]))return;i(t)}):(n=e,r=t,function(e){for(var t=[],o=0,i=n.length;i>o;o++){for(var s=u(n[o]),a=e,c=0,f=s.length;f>c&&(a=a[s[c]]);c++);t.push(a)}r(t)})}var o=e(15),i=e(2),u=o.parseField,s=i({name:"indexes",mapper:function(e,t){return r(Object.keys(e.fields),t)},reducer:function(){throw new Error("reduce not supported")},ddocValidator:function(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}});t.exports=s},{15:15,2:2}],8:[function(e,t,n){"use strict";var r=e(17),o=r.log,i=e(31),u=e(7),s=e(15),a=s.validateIndex,c=s.massageIndexDef,f=e(16);t.exports=function(e,t){t=f(t);var n=r.clone(t.index);t.index=c(t.index),a(t.index);var s,l,d,h=r.MD5(JSON.stringify(t)),p=t.name||"idx-"+h,v=t.ddoc||"idx-"+h,y="_design/"+v,g=!1,m=!1;return o("creating index",y),(s=e,l=y,d=function(e){return e._rev&&"query"!==e.language&&(g=!0),e.language="query",e.views=e.views||{},!(m=!!e.views[p])&&(e.views[p]={map:{fields:r.mergeObjects(t.index.fields)},reduce:"_count",options:{def:n}},e)},i.upsert.call(s,l,d)).then(function(){if(g)throw new Error('invalid language for ddoc with id "'+y+'" (should be "query")')}).then(function(){var t=v+"/"+p;return u.query.call(e,t,{limit:0,reduce:!1}).then(function(){return{id:y,name:p,result:m?"exists":"created"}})})}},{15:15,16:16,17:17,31:31,7:7}],9:[function(e,t,n){"use strict";var r=e(7),o=e(4);t.exports=function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,i=t.name;return o(e,n,function(e){return 1===Object.keys(e.views).length&&e.views[i]?{_id:n,_deleted:!0}:(delete e.views[i],e)}).then(function(){return r.viewCleanup.apply(e)}).then(function(){return{ok:!0}})}},{4:4,7:7}],10:[function(e,t,n){"use strict";function r(e,t,n){return n.every(function(n){var i,u,s,a=t[n],c=p(n),f=y(e,c);return l(n)?(u=a,s=e,"$or"===(i=n)?u.some(function(e){return r(s,e,Object.keys(e))}):"$not"===i?!r(s,u,Object.keys(u)):!u.find(function(e){return r(s,e,Object.keys(e))})):o(a,e,c,f)})}function o(e,t,n,r){return!e||Object.keys(e).every(function(o){var i=e[o];return function(e,t,n,r,o){if(!g[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type or $all');return g[e](t,n,r,o)}(o,t,i,n,r)})}function i(e){return null!=e}function u(e){return void 0!==e}function s(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}var a=e(24),c=e(26).collate,f=e(15),l=f.isCombinationalField,d=f.getKey,h=f.getValue,p=f.parseField,v=e(17),y=v.getFieldFromDoc,g={$elemMatch:function(e,t,n,i){return!!a(i)&&(0!==i.length&&("object"==typeof i[0]?i.some(function(e){return r(e,t,Object.keys(t))}):i.some(function(r){return o(t,e,n,r)})))},$eq:function(e,t,n,r){return u(r)&&0===c(r,t)},$gte:function(e,t,n,r){return u(r)&&c(r,t)>=0},$gt:function(e,t,n,r){return u(r)&&c(r,t)>0},$lte:function(e,t,n,r){return u(r)&&c(r,t)<=0},$lt:function(e,t,n,r){return u(r)&&c(r,t)<0},$exists:function(e,t,n,r){return t?u(r):!u(r)},$mod:function(e,t,n,r){return i(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==c(r,e)})},$in:function(e,t,n,r){return i(r)&&s(r,t)},$nin:function(e,t,n,r){return i(r)&&!s(r,t)},$size:function(e,t,n,r){return i(r)&&(o=t,r.length===o);var o},$all:function(e,t,n,r){return a(r)&&(o=r,t.every(function(e){return o.indexOf(e)>-1}));var o},$regex:function(e,t,n,r){return i(r)&&(o=r,new RegExp(t).test(o));var o},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};t.exports=function(e,t,n){if(e=e.filter(function(e){return r(e.doc,t.selector,n)}),t.sort){var o=function(e){function t(t){return e.map(function(e){var n=d(e),r=p(n);return y(t,r)})}return function(e,n){var r=t(e.doc),o=t(n.doc),i=c(r,o);return 0!==i?i:v.compare(e.doc._id,n.doc._id)}}(t.sort);e=e.sort(o),"string"!=typeof t.sort[0]&&"desc"===h(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,u=("limit"in t?t.limit:e.length)+i;e=e.slice(i,u)}return e}},{15:15,17:17,24:24,26:26}],11:[function(e,t,n){"use strict";var r=e(17),o=r.clone,i=e(13),u=e(26).collate,s=e(7),a=e(12),c=e(15),f=e(10),l=c.massageSelector,d=c.massageSort,h=c.getValue,p=c.validateFindRequest,v=c.validateSort,y=c.reverseOptions,g=c.filterInclusiveStart,m=r.Promise;t.exports=function(e,t){return t.selector&&(t.selector=l(t.selector)),t.sort&&(t.sort=d(t.sort)),p(t),i(e).then(function(n){var i=a(t,n.indexes),c=i.index;v(t,c);var l=r.extend(!0,{include_docs:!0,reduce:!1},i.queryOpts);return"startkey"in l&&"endkey"in l&&u(l.startkey,l.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===h(t.sort[0])&&(l.descending=!0,l=y(l)),i.inMemoryFields.length||("limit"in t&&(l.limit=t.limit),"skip"in t&&(l.skip=t.skip)),m.resolve().then(function(){if("_all_docs"===c.name)return t=e,(n=o(l)).descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),t.allDocs(n);var t,n,r,i=(r=c).ddoc.substring(8)+"/"+r.name;return s.query.call(e,i,l)}).then(function(e){!1===l.inclusive_start&&(e.rows=g(e.rows,l.startkey,c)),i.inMemoryFields.length&&(e.rows=f(e.rows,t,i.inMemoryFields));var n={docs:e.rows.map(function(e){var n=e.doc;return t.fields?r.pick(n,t.fields):n})};return c.defaultUsed&&(n.warning="no matching index found, create an index to optimize query time"),n}))})}},{10:10,12:12,13:13,15:15,17:17,26:26,7:7}],12:[function(e,t,n){"use strict";function r(e,t){for(var n=e.def.fields.map(p),r=0,o=n.length;o>r;r++){if(t===n[r])return!0}return!1}function o(e,t){var n=t.def.fields.map(p);return e.slice().sort(function(e,t){var r=n.indexOf(e),o=n.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),-1===o&&(o=Number.MAX_VALUE),l.compare(r,o)})}function i(e,t,n,i){var u,s,a=l.flatten(e,function(e,t,n){for(var i=!1,u=0,s=(n=o(n,e)).length;s>u;u++){var a=n[u];if(i||!r(e,a))return n.slice(u);s-1>u&&(c=t[a],"$eq"!==p(c))&&(i=!0)}var c;return[]}(t,n,i),(u=n,s=[],Object.keys(u).forEach(function(e){var t=u[e];Object.keys(t).forEach(function(t){"$ne"===t&&s.push(e)})}),s));return o(l.uniq(a),t)}function u(e){return-1===m.indexOf(e)}function s(e,t,n,r){var o,i=e.def.fields.map(p);return!!function(e,t,n){if(t){var r=l.oneArrayIsStrictSubArrayOfOther(t,e),o=l.oneArrayIsSubArrayOfOther(n,e);return r&&o}return l.oneSetIsSubArrayOfOther(n,e)}(i,t,n)&&(o=r[i[0]],!(!Object.keys(o).some(function(e){return!u(e)})||1===Object.keys(o).length&&"$ne"===p(o)))}function a(e,t,n,r){var o,i,u,a=(o=e,i=t,u=n,r.reduce(function(e,t){return s(t,u,i,o)&&e.push(t),e},[]));if(0===a.length){var c=r[0];return c.defaultUsed=!0,c}if(1===a.length)return a[0];var f=l.arrayToObject(t);return l.max(a,function(e){for(var t=e.def.fields.map(p),n=0,r=0,o=t.length;o>r;r++){var i=t[r];f[i]&&n++}return n})}function c(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function f(e,t){return t.defaultUsed?{queryOpts:{startkey:null},inMemoryFields:[]}:1===t.def.fields.length?(n=e,o=p(t.def.fields[0]),i=n[o],s=[],Object.keys(i).forEach(function(e){if(u(e))s.push(o);else{var t=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}(e,i[e]);r=r?l.mergeObjects([r,t]):t}}),{queryOpts:r,inMemoryFields:s}):function(e,t){function n(e){!1!==r&&s.push(y),!1!==o&&a.push(g),u=i.slice(e)}for(var r,o,i=t.def.fields.map(p),u=[],s=[],a=[],f=0,d=i.length;d>f;f++){var h=e[i[f]];if(!h){n(f);break}if(f>0){if("$ne"in h){n(f);break}var v="$gt"in h||"$gte"in h||"$lt"in h||"$lte"in h,m=Object.keys(e[i[f-1]]),b=l.arrayEquals(m,["$eq"]),w=l.arrayEquals(m,Object.keys(h));if(v&&!b&&!w){n(f);break}}for(var k=Object.keys(h),_=null,x=0;x<k.length;x++){var $=k[x],j=c($,h[$]);_=_?l.mergeObjects([_,j]):j}s.push("startkey"in _?_.startkey:y),a.push("endkey"in _?_.endkey:g),"inclusive_start"in _&&(r=_.inclusive_start),"inclusive_end"in _&&(o=_.inclusive_end)}var O={startkey:s,endkey:a};return void 0!==r&&(O.inclusive_start=r),void 0!==o&&(O.inclusive_end=o),{queryOpts:O,inMemoryFields:u}}(e,t);var n,r,o,i,s}var l=e(17),d=l.log,h=e(15),p=h.getKey,v=h.getUserFields,y=null,g={"￿":{}},m=["$eq","$gt","$gte","$lt","$lte"];t.exports=function(e,t){d("planning query",e);var n=e.selector,r=e.sort,o=v(n,r),u=o.fields,s=a(n,u,o.sortOrder,t),c=f(n,s),l={queryOpts:c.queryOpts,index:s,inMemoryFields:i(c.inMemoryFields,s,n,u)};return d("query plan",l),l}},{15:15,17:17}],13:[function(e,t,n){"use strict";var r=e(17),o=e(15).massageIndexDef;t.exports=function(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=r.flatten(t.indexes,e.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(void 0!==e.doc.views?Object.keys(e.doc.views):[]).map(function(t){var n=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:o(n.options.def)}})})),t.indexes.sort(function(e,t){return r.compare(e.name,t.name)}),t.total_rows=t.indexes.length,t})}},{15:15,17:17}],14:[function(e,t,n){"use strict";var r=e(17).callbackify;n.createIndex=r(e(8)),n.find=r(e(11)),n.getIndexes=r(e(13)),n.deleteIndex=r(e(9))},{11:11,13:13,17:17,8:8,9:9}],15:[function(e,t,n){"use strict";function r(e){return Object.keys(e)[0]}function o(e){return e[r(e)]}function i(e){return f.indexOf(e)>-1}function u(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),i(n))r instanceof Array?t[n]=r.map(function(e){return u([e])}):t[n]=u([r]);else{var o=t[n]=t[n]||{};Object.keys(r).forEach(function(e){var t,n,i,u,s,a,c,f,l,d,h=r[e];return"$gt"===e||"$gte"===e?(f=e,l=h,void(void 0===(d=o).$eq&&(void 0!==d.$gte?"$gte"===f?l>d.$gte&&(d.$gte=l):l>=d.$gte&&(delete d.$gte,d.$gt=l):void 0!==d.$gt?"$gte"===f?l>d.$gt&&(delete d.$gt,d.$gte=l):l>d.$gt&&(d.$gt=l):d[f]=l))):"$lt"===e||"$lte"===e?(s=e,a=h,void(void 0===(c=o).$eq&&(void 0!==c.$lte?"$lte"===s?a<c.$lte&&(c.$lte=a):a<=c.$lte&&(delete c.$lte,c.$lt=a):void 0!==c.$lt?"$lte"===s?a<c.$lt&&(delete c.$lt,c.$lte=a):a<c.$lt&&(c.$lt=a):c[s]=a))):"$ne"===e?(i=h,void("$ne"in(u=o)?u.$ne.push(i):u.$ne=[i])):"$eq"===e?(t=h,delete(n=o).$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,void(n.$eq=t)):void(o[e]=h)})}})}),t}function s(e,t){for(var n=[],o=0;o<t.def.fields.length;o++){var i=r(t.def.fields[o]);n.push(e[i])}return n}var a=e(17),c=e(26),f=["$or","$nor","$not"];t.exports={getKey:r,getValue:o,massageSort:function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})},massageSelector:function(e){var t=a.clone(e),n=!1;"$and"in t&&(t=u(t.$and),n=!0),"$not"in t&&(t.$not=u([t.$not]));for(var r=Object.keys(t),o=0;o<r.length;o++){var i=r[o],s=t[i];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),t[i]=s}return t},validateIndex:function(e){var t=e.fields.filter(function(e){return"asc"===o(e)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")},validateFindRequest:function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")},validateSort:function(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter(function(e){return"_id"!==Object.keys(e)[0]}).map(function(e){return Object.keys(e)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}t.defaultUsed},reverseOptions:function(e){var t=a.clone(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t},filterInclusiveStart:function(e,t,n){for(var r=n.def.fields,o=0,i=e.length;i>o;o++){var u=s(e[o].doc,n);if(1===r.length)u=u[0];else for(;u.length>t.length;)u.pop();if(Math.abs(c.collate(u,t))>0)break}return o>0?e.slice(o):e},massageIndexDef:function(e){return e.fields=e.fields.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}),e},parseField:a.parseField,getUserFields:function(e,t){var n,o=Object.keys(e),i=t?t.map(r):[];return n=o.length>=i.length?o:i,0===i.length?{fields:n}:{fields:n=n.sort(function(e,t){var n=i.indexOf(e);-1===n&&(n=Number.MAX_VALUE);var r=i.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),r>n?-1:n>r?1:0}),sortOrder:t.map(r)}},isCombinationalField:i}},{17:17,26:26}],16:[function(e,t,n){"use strict";var r=e(17).clone;t.exports=function(e){return(e=r(e)).index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}},{17:17}],17:[function(e,t,n){(function(t){"use strict";var r=e(29);n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.getArguments=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}},n.toPromise=function(e){return n.getArguments(function(o){var i,u=this,s="function"==typeof o[o.length-1]&&o.pop();s&&(i=function(e,n){t.nextTick(function(){s(e,n)})});var a=new r(function(t,r){try{var i=n.once(function(e,n){e?r(e):t(n)});o.push(i),e.apply(u,o)}catch(e){r(e)}});return i&&a.then(function(e){i(null,e)},i),a.cancel=function(){return this},a})},n.inherits=e(23),n.Promise=r,n.clone=function(e){return n.extend(!0,{},e)},n.extend=e(28),n.callbackify=function(e){return n.getArguments(function(t){var r=t.pop(),o=e.apply(this,t);return n.promisedCallback(o,r),o})},n.promisedCallback=function(e,n){return e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e};var o=e(19),i=e(35);n.MD5=function(e){return t.browser?i.hash(e):o.createHash("md5").update(e).digest("hex")},n.flatten=n.getArguments(function(e){for(var t=[],r=0,o=e.length;o>r;r++){var i=e[r];Array.isArray(i)?t=t.concat(n.flatten.apply(null,i)):t.push(i)}return t}),n.mergeObjects=function(e){for(var t={},r=0,o=e.length;o>r;r++)t=n.extend(!0,t,e[r]);return t},n.getFieldFromDoc=function(e,t){for(var n=e,r=0,o=t.length;o>r;r++){if(!(n=n[t[r]]))break}return n},n.setFieldInDoc=function(e,t,n){for(var r=0,o=t.length;o-1>r;r++){e=e[t[r]]={}}e[t[o-1]]=n},n.parseField=function(e){for(var t=[],n="",r=0,o=e.length;o>r;r++){var i=e[r];"."===i?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=i}return t.push(n),t},n.pick=function(e,t){for(var r={},o=0,i=t.length;i>o;o++){var u=n.parseField(t[o]),s=n.getFieldFromDoc(e,u);void 0!==s&&n.setFieldInDoc(r,u,s)}return r},n.oneArrayIsSubArrayOfOther=function(e,t){for(var n=0,r=Math.min(e.length,t.length);r>n;n++)if(e[n]!==t[n])return!1;return!0},n.oneArrayIsStrictSubArrayOfOther=function(e,t){return!(e.length>t.length)&&n.oneArrayIsSubArrayOfOther(e,t)},n.oneSetIsSubArrayOfOther=function(e,t){e=e.slice();for(var n=0,r=t.length;r>n;n++){var o=t[n];if(!e.length)break;var i=e.indexOf(o);if(-1===i)return!1;e.splice(i,1)}return!0},n.compare=function(e,t){return t>e?-1:e>t?1:0},n.arrayToObject=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e[n]]=!0;return t},n.max=function(e,t){for(var n=null,r=-1,o=0,i=e.length;i>o;o++){var u=e[o],s=t(u);s>r&&(r=s,n=u)}return n},n.arrayEquals=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},n.uniq=function(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})},n.log=e(20)("pouchdb:find")}).call(this,e(34))},{19:19,20:20,23:23,28:28,29:29,34:34,35:35}],18:[function(e,t,n){"use strict";t.exports=function(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}},{}],19:[function(e,t,n){},{}],20:[function(e,t,n){function r(){var e;try{e=n.storage.debug}catch(e){}return e}(n=t.exports=e(21)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(r())},{21:21}],21:[function(e,t,n){(n=t.exports=function(e){function t(){}function i(){var e=i,t=+new Date,u=t-(r||t);e.diff=u,e.prev=r,e.curr=t,r=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=n.colors[o++%n.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var o=n.formatters[r];if("function"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s)),(i.log||n.log||console.log.bind(console)).apply(e,s)}t.enabled=!1,i.enabled=!0;var u=n.enabled(e)?i:t;return u.namespace=e,u}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e(25),n.names=[],n.skips=[],n.formatters={};var r,o=0},{25:25}],22:[function(e,t,n){(function(e){"use strict";function n(){c=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}c=!1}var r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,u=new o(n),s=e.document.createTextNode("");u.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var a=new e.MessageChannel;a.port1.onmessage=n,r=function(){a.port2.postMessage(0)}}var c,f=[];t.exports=function(e){1!==f.push(e)||c||r()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],24:[function(e,t,n){var r=Array.isArray,o=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==o.call(e)}},{}],25:[function(e,t,n){function r(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,i=60*o,u=60*i,s=24*u,a=365.25*s;t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}(e):t.long?r(c=e,s,"day")||r(c,u,"hour")||r(c,i,"minute")||r(c,o,"second")||c+" ms":(n=e)>=s?Math.round(n/s)+"d":n>=u?Math.round(n/u)+"h":n>=i?Math.round(n/i)+"m":n>=o?Math.round(n/o)+"s":n+"ms";var n,c}},{}],26:[function(e,t,n){"use strict";function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,o=r?"0":"2",i=(r?-n:n)-s,u=f.padLeft(i.toString(),"0",a);o+=c+u;var l=Math.abs(parseFloat(t[0]));r&&(l=10-l);var d=l.toFixed(20);return d=d.replace(/\.?0+$/,""),o+=c+d}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),o=-1,i=r.length,u="";if(t)for(;++o<i;)u+=n.toIndexableString(r[o]);else for(;++o<i;){var l=r[o];u+=n.toIndexableString(l)+n.toIndexableString(e[l])}return u}return""}function o(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var o="0"===e[t];t++;var i="",u=e.substring(t,t+a),c=parseInt(u,10)+s;for(o&&(c=-c),t+=a;;){var f=e[t];if("\0"===f)break;i+=f,t++}n=1===(i=i.split(".")).length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),o&&(n-=10),0!==c&&(n=parseFloat(n+"e"+c))}return{num:n,length:t-r}}function i(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){o[e.pop()]=n}else e.push(n)}}function u(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:3>t?t+2:t+3:Array.isArray(e)?5:void 0}var s=-324,a=3,c="",f=e(27);n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r,o,i=u(e),s=u(t);if(i-s!=0)return i-s;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return(r=e)===(o=t)?0:r>o?1:-1}return Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),o=0;r>o;o++){var i=n.collate(e[o],t[o]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var r=Object.keys(e),o=Object.keys(t),i=Math.min(r.length,o.length),u=0;i>u;u++){var s=n.collate(r[u],o[u]);if(0!==s)return s;if(0!==(s=n.collate(e[r[u]],t[o[u]])))return s}return r.length===o.length?0:r.length>o.length?1:-1}(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;r>o;o++)e[o]=n.normalizeKey(t[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var u=t[i];void 0!==u&&(e[i]=n.normalizeKey(u))}}}return e},n.toIndexableString=function(e){return u(e=n.normalizeKey(e))+c+r(e)+"\0"},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var u=e[r++];if("\0"!==u)switch(u){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var s=o(e,r);t.push(s.num),r+=s.length;break;case"4":for(var a="";;){var c=e[r];if("\0"===c)break;a+=c,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+u)}else{if(1===t.length)return t.pop();i(t,n)}}}},{27:27}],27:[function(e,t,n){"use strict";function r(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){return r(e,t,n)+e},n.padRight=function(e,t,n){return e+r(e,t,n)},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;r>n;n++){if(n===o)return 1;var i=e.charAt(n),u=t.charAt(n);if(i!==u)return u>i?-1:1}return o>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{n=(t?-Math.ceil(e%10):Math.floor(e%10))+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],28:[function(e,t,n){"use strict";function r(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?s[l.call(e)]||"object":typeof e}function o(e){if(!e||"object"!==r(e)||e.nodeType||null!==(t=e)&&t===t.window)return!1;var t,n;try{if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(n in e);return void 0===n||d.call(e,n)}function i(e){return"function"===r(e)}function u(e,t,n){var r,u,s,a,c,f,l,d=t[0]||{},p=1,v=t.length,y=!1,g=/\d+/;for("boolean"==typeof d&&(y=d,d=t[1]||{},p=2),"object"==typeof d||i(d)||(d={}),v===p&&(d=this,--p);v>p;p++)if(null!=(r=t[p]))for(u in l=h(r),r)if(!(u in Object.prototype)){if(l&&!g.test(u))continue;if(s=d[u],d===(a=r[u]))continue;y&&a&&(o(a)||(c=h(a)))?(c?(c=!1,f=s&&h(s)?s:[]):f=s&&o(s)?s:{},e.push({args:[y,f,a],result:{container:d,key:u}})):void 0!==a&&(h(r)&&i(a)||(d[u]=a))}n.container[n.key]=d}for(var s={},a=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],c=0;c<a.length;c++){var f=a[c];s["[object "+f+"]"]=f.toLowerCase()}var l=s.toString,d=s.hasOwnProperty,h=Array.isArray||function(e){return"array"===r(e)};t.exports=function(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var o,i={};for(e.push({args:r,result:{container:i,key:"key"}});o=e.pop();)u(e,o.args,o.result);return i.key}},{}],29:[function(e,t,n){"use strict";var r,o=(r=e(30))&&"object"==typeof r&&"default"in r?r.default:r,i="function"==typeof Promise?Promise:o;t.exports=i},{30:30}],30:[function(e,t,n){"use strict";function r(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,e!==r&&a(this,e)}function i(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){f(function(){var r;try{r=t(n)}catch(t){return l.reject(e,t)}r===e?l.reject(e,new TypeError("Cannot resolve promise with itself")):l.resolve(e,r)})}function s(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function a(e,t){function n(t){o||(o=!0,l.reject(e,t))}function r(t){o||(o=!0,l.resolve(e,t))}var o=!1,i=c(function(){t(r,n)});"error"===i.status&&n(i.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}var f=e(22),l={},d=["REJECTED"],h=["FULFILLED"],p=["PENDING"];t.exports=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===h||"function"!=typeof t&&this.state===d)return this;var n=new this.constructor(r);this.state!==p?u(n,this.state===h?e:t,this.outcome):this.queue.push(new i(n,e,t));return n},i.prototype.callFulfilled=function(e){l.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){l.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},l.resolve=function(e,t){var n=c(s,t);if("error"===n.status)return l.reject(e,n.value);var r=n.value;if(r)a(e,r);else{e.state=h,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},l.reject=function(e,t){e.state=d,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},o.resolve=function(e){return e instanceof this?e:l.resolve(new this(r),e)},o.reject=function(e){var t=new this(r);return l.reject(t,e)},o.all=function(e){function t(e,t){n.resolve(e).then(function(e){u[t]=e,++s!==o||i||(i=!0,l.resolve(c,u))},function(e){i||(i=!0,l.reject(c,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var u=new Array(o),s=0,a=-1,c=new this(r);++a<o;)t(e[a],a);return c},o.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n,o=e.length,i=!1;if(!o)return this.resolve([]);for(var u=-1,s=new this(r);++u<o;)n=e[u],t.resolve(n).then(function(e){i||(i=!0,l.resolve(s,e))},function(e){i||(i=!0,l.reject(s,e))});return s}},{22:22}],31:[function(e,t,n){"use strict";function r(e,t,n){return"string"!=typeof t?o.reject(new Error("doc id is required")):e.get(t).catch(function(e){if(404!==e.status)throw e;return{}}).then(function(o){var i,u,s,a=o._rev,c=n(o);return c?(c._id=t,c._rev=a,u=c,s=n,(i=e).put(u).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return r(i,u._id,s)})):{updated:!1,rev:a}})}var o=e(33);n.upsert=function(e,t,n){var o=r(this,e,t);return"function"!=typeof n?o:void o.then(function(e){n(null,e)},n)},n.putIfNotExists=function(e,t,n){"string"!=typeof e&&(n=t,e=(t=e)._id);var o=r(this,e,function(e){return!e._rev&&t});return"function"!=typeof n?o:void o.then(function(e){n(null,e)},n)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{33:33}],32:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{22:22,30:30}],33:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{29:29,32:32}],34:[function(e,t,n){function r(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&o())}function o(){if(!f){var e=setTimeout(r);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function u(){}var s,a=t.exports={},c=[],f=!1,l=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=u,a.addListener=u,a.once=u,a.off=u,a.removeListener=u,a.removeAllListeners=u,a.emit=u,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],35:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else{var r;try{r=window}catch(e){r=self}r.SparkMD5=e()}}(function(e){"use strict";var t=function(e,t){return e+t&4294967295},n=function(e,n,r,o,i,u){return n=t(t(n,e),t(o,u)),t(n<<i|n>>>32-i,r)},r=function(e,t,r,o,i,u,s){return n(t&r|~t&o,e,t,i,u,s)},o=function(e,t,r,o,i,u,s){return n(t&o|r&~o,e,t,i,u,s)},i=function(e,t,r,o,i,u,s){return n(t^r^o,e,t,i,u,s)},u=function(e,t,r,o,i,u,s){return n(r^(t|~o),e,t,i,u,s)},s=function(e,n){var s=e[0],a=e[1],c=e[2],f=e[3];s=r(s,a,c,f,n[0],7,-680876936),f=r(f,s,a,c,n[1],12,-389564586),c=r(c,f,s,a,n[2],17,606105819),a=r(a,c,f,s,n[3],22,-1044525330),s=r(s,a,c,f,n[4],7,-176418897),f=r(f,s,a,c,n[5],12,1200080426),c=r(c,f,s,a,n[6],17,-1473231341),a=r(a,c,f,s,n[7],22,-45705983),s=r(s,a,c,f,n[8],7,1770035416),f=r(f,s,a,c,n[9],12,-1958414417),c=r(c,f,s,a,n[10],17,-42063),a=r(a,c,f,s,n[11],22,-1990404162),s=r(s,a,c,f,n[12],7,1804603682),f=r(f,s,a,c,n[13],12,-40341101),c=r(c,f,s,a,n[14],17,-1502002290),a=r(a,c,f,s,n[15],22,1236535329),s=o(s,a,c,f,n[1],5,-165796510),f=o(f,s,a,c,n[6],9,-1069501632),c=o(c,f,s,a,n[11],14,643717713),a=o(a,c,f,s,n[0],20,-373897302),s=o(s,a,c,f,n[5],5,-701558691),f=o(f,s,a,c,n[10],9,38016083),c=o(c,f,s,a,n[15],14,-660478335),a=o(a,c,f,s,n[4],20,-405537848),s=o(s,a,c,f,n[9],5,568446438),f=o(f,s,a,c,n[14],9,-1019803690),c=o(c,f,s,a,n[3],14,-187363961),a=o(a,c,f,s,n[8],20,1163531501),s=o(s,a,c,f,n[13],5,-1444681467),f=o(f,s,a,c,n[2],9,-51403784),c=o(c,f,s,a,n[7],14,1735328473),a=o(a,c,f,s,n[12],20,-1926607734),s=i(s,a,c,f,n[5],4,-378558),f=i(f,s,a,c,n[8],11,-2022574463),c=i(c,f,s,a,n[11],16,1839030562),a=i(a,c,f,s,n[14],23,-35309556),s=i(s,a,c,f,n[1],4,-1530992060),f=i(f,s,a,c,n[4],11,1272893353),c=i(c,f,s,a,n[7],16,-155497632),a=i(a,c,f,s,n[10],23,-1094730640),s=i(s,a,c,f,n[13],4,681279174),f=i(f,s,a,c,n[0],11,-358537222),c=i(c,f,s,a,n[3],16,-722521979),a=i(a,c,f,s,n[6],23,76029189),s=i(s,a,c,f,n[9],4,-640364487),f=i(f,s,a,c,n[12],11,-421815835),c=i(c,f,s,a,n[15],16,530742520),a=i(a,c,f,s,n[2],23,-995338651),s=u(s,a,c,f,n[0],6,-198630844),f=u(f,s,a,c,n[7],10,1126891415),c=u(c,f,s,a,n[14],15,-1416354905),a=u(a,c,f,s,n[5],21,-57434055),s=u(s,a,c,f,n[12],6,1700485571),f=u(f,s,a,c,n[3],10,-1894986606),c=u(c,f,s,a,n[10],15,-1051523),a=u(a,c,f,s,n[1],21,-2054922799),s=u(s,a,c,f,n[8],6,1873313359),f=u(f,s,a,c,n[15],10,-30611744),c=u(c,f,s,a,n[6],15,-1560198380),a=u(a,c,f,s,n[13],21,1309151649),s=u(s,a,c,f,n[4],6,-145523070),f=u(f,s,a,c,n[11],10,-1120210379),c=u(c,f,s,a,n[2],15,718787259),a=u(a,c,f,s,n[9],21,-343485551),e[0]=t(s,e[0]),e[1]=t(a,e[1]),e[2]=t(c,e[2]),e[3]=t(f,e[3])},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},c=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},f=function(e){var t,n,r,o,i,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(f,a(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(f,r),t=0;16>t;t+=1)r[t]=0;return o=(o=8*c).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=i,r[15]=u,s(f,r),f},l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d=function(e){var t,n="";for(t=0;4>t;t+=1)n+=l[e>>8*t+4&15]+l[e>>8*t&15];return n},h=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=d(e[t]);return e.join("")},p=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==h(f("hello"))&&(t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),p.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)s(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},p.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},p.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(s(this._state,e),i=0;16>i;i+=1)e[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,s(this._state,e)},p.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},p.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=f(e);return t?n:h(n)},p.hashBinary=function(e,t){var n=f(e);return t?n:h(n)},(p.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)s(this._state,c(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},p.ArrayBuffer.hash=function(e,t){var n=function(e){var t,n,r,o,i,u,a=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;a>=t;t+=64)s(f,c(e.subarray(t-64,t)));for(n=(e=a>t-64?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(f,r),t=0;16>t;t+=1)r[t]=0;return o=(o=8*a).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=i,r[15]=u,s(f,r),f}(new Uint8Array(e));return t?n:h(n)},p})},{}],36:[function(e,t,n){"use strict";var r=e(17),o=e(6),i=e(14),u={};u.createIndex=r.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));("http"===this.type()?o:i).createIndex(this,e,t)}),u.find=r.toPromise(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));("http"===this.type()?o:i).find(this,e,t)}),u.getIndexes=r.toPromise(function(e){("http"===this.type()?o:i).getIndexes(this,e)}),u.deleteIndex=r.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));("http"===this.type()?o:i).deleteIndex(this,e,t)}),t.exports=u,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(u)},{14:14,17:17,6:6}]},{},[36])(36)});